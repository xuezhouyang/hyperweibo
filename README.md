# Java项目构建工具

一个简单的Java项目构建和测试工具，支持查看不同测试套件的测试结果。

**作者：** Xue Zhouyang <xuezhouyang@gmail.com>

## 法律免责声明与使用限制

**重要提示：请在使用本软件前仔细阅读以下声明**

1. 本软件仅供作者个人本地测试使用，不得用于任何商业目的或获利行为。

2. 任何个人或实体使用本软件应自行承担全部风险。作者明确声明不对使用本软件可能导致的任何直接、间接、偶然、特殊、惩罚性或后果性损害承担任何责任，无论此类损害是否可预见，也无论责任理论如何。

3. 使用者必须遵守所有适用的国家、地区和国际法律法规，包括但不限于计算机安全法、网络安全法、数据保护法和隐私法。作者不对任何违反法律法规的使用行为承担责任。

4. **地域限制：** 严禁在中华人民共和国和美利坚合众国境内使用本软件，或通过本软件请求、访问、处理或存储与这两国有利益关联或受其管辖的任何数据、信息或资产。

5. 任何基于本项目的二次开发、修改、分发或使用导致的任何直接或间接后果，包括但不限于法律责任、数据泄露、系统损害或任何其他形式的损失，均与原作者无关，原作者不承担任何法律或道德责任。

6. 使用本软件即表示您确认已阅读、理解并同意遵守上述所有条款和条件。如不同意，请立即停止使用本软件并删除所有相关文件。

## 最终解释权

本许可协议的最终解释权归作者Xue Zhouyang所有。在任何情况下，本许可协议的中文版本应当作为唯一的官方版本，具有最终的法律约束力。若本许可协议的中文版本与任何其他语言版本之间存在不一致或冲突，应以中文版本为准。

## 争议解决与管辖权

**专属管辖权条款：**

1. 因本软件或本许可协议引起的或与之相关的任何争议、纠纷或索赔，包括但不限于其存在性、有效性、解释、履行、违约或终止，或因本协议引起的任何非合同性争议（以下统称"争议"），应当首先通过友好协商解决。

2. 若争议在协商开始后三十(30)日内未能解决，则任何一方均可将该争议提交至**中华人民共和国北京市朝阳区人民法院专属管辖**，通过诉讼程序最终解决。

3. 各方在此不可撤销地同意并承认中华人民共和国北京市朝阳区人民法院对任何此类争议具有专属管辖权，并放弃对该管辖权提出任何异议的权利。

4. 本条款适用于全球范围内的任何诉讼或法律程序，无论其发生地或提起地为何处。

## 损害赔偿与补偿

若任何个人或实体违反本许可协议的任何条款，或因使用本软件而导致作者遭受任何形式的损失、损害或法律责任，该个人或实体应当向作者提供全面赔偿，包括但不限于：

1. 作者因应对相关争议、诉讼或索赔而产生的全部法律费用、律师费和诉讼费用；
2. 作者在处理相关事务期间的工作时间损失，按照每小时人民币5,000元或等值外币计算；
3. 作者因此遭受的任何直接或间接收入损失；
4. 对作者声誉或商业价值造成的任何损害；
5. 任何惩罚性赔偿金，其金额不低于实际损害的三倍。

上述赔偿义务不受本许可协议中任何责任限制条款的限制，且在本许可协议终止后仍然有效。

## ENGLISH VERSION (FOR REFERENCE ONLY - CHINESE VERSION SHALL PREVAIL)

**IMPORTANT NOTICE: THE CHINESE VERSION OF THIS LICENSE AGREEMENT SHALL BE THE ONLY OFFICIAL VERSION AND SHALL PREVAIL IN CASE OF ANY INCONSISTENCY OR CONFLICT WITH THIS ENGLISH VERSION. THE FINAL RIGHT OF INTERPRETATION OF THIS LICENSE AGREEMENT BELONGS TO THE AUTHOR XUE ZHOUYANG.**

### LEGAL DISCLAIMER AND USAGE RESTRICTIONS

**IMPORTANT: PLEASE READ THE FOLLOWING STATEMENT CAREFULLY BEFORE USING THIS SOFTWARE**

1. This software is for the author's personal local testing use only and shall not be used for any commercial purpose or profit-making activity.

2. Any individual or entity using this software shall bear all risks. The author expressly disclaims any liability for any direct, indirect, incidental, special, punitive, or consequential damages arising from the use of this software, whether such damages are foreseeable or not, and regardless of the theory of liability.

3. Users must comply with all applicable national, regional, and international laws and regulations, including but not limited to computer security laws, cybersecurity laws, data protection laws, and privacy laws. The author shall not be liable for any violation of laws and regulations.

4. **TERRITORIAL RESTRICTION:** It is strictly prohibited to use this software within the territory of the People's Republic of China and the United States of America, or to request, access, process, or store any data, information, or assets associated with or subject to the jurisdiction of these two countries through this software.

5. The author shall not be responsible for any direct or indirect consequences resulting from any secondary development, modification, distribution, or use of this project, including but not limited to legal liability, data leakage, system damage, or any other form of loss.

6. By using this software, you acknowledge that you have read, understood, and agreed to comply with all the terms and conditions above. If you do not agree, please stop using this software immediately and delete all related files.

### FINAL RIGHT OF INTERPRETATION

The final right of interpretation of this license agreement belongs to the author Xue Zhouyang. In all circumstances, the Chinese version of this license agreement shall be the only official version and shall have final legal binding force. In case of any inconsistency or conflict between the Chinese version of this license agreement and any version in other languages, the Chinese version shall prevail.

### DISPUTE RESOLUTION AND JURISDICTION

**EXCLUSIVE JURISDICTION CLAUSE:**

1. Any dispute, controversy, or claim arising out of or relating to this software or this license agreement, including its existence, validity, interpretation, performance, breach, or termination, or any non-contractual dispute arising from this agreement (collectively referred to as "Dispute"), shall first be resolved through friendly negotiation.

2. If the Dispute is not resolved within thirty (30) days after the commencement of negotiation, either party may submit the Dispute to the **exclusive jurisdiction of the People's Court of Chaoyang District, Beijing, People's Republic of China**, for final resolution through litigation.

3. The parties hereby irrevocably consent and submit to the exclusive jurisdiction of the People's Court of Chaoyang District, Beijing, People's Republic of China, for any such Dispute and waive any objections to such jurisdiction.

4. This provision applies to any litigation or legal proceedings worldwide, regardless of where they are initiated or brought.

### DAMAGES AND COMPENSATION

If any individual or entity violates any provision of this license agreement, or if the author suffers any form of loss, damage, or legal liability due to the use of this software, such individual or entity shall provide full compensation to the author, including but not limited to:

1. All legal fees, attorney fees, and litigation costs incurred by the author in responding to relevant disputes, litigation, or claims;
2. Loss of the author's working time in handling related matters, calculated at RMB 5,000 per hour or equivalent foreign currency;
3. Any direct or indirect income loss suffered by the author;
4. Any damage to the author's reputation or commercial value;
5. Any punitive damages, the amount of which shall not be less than three times the actual damages.

The above compensation obligations are not limited by any liability limitation provisions in this license agreement and shall remain effective after the termination of this license agreement.

**完整的法律条款请参阅[LICENSE](LICENSE)文件。**

## 功能特点

- 支持查看标准测试套件结果
- 支持查看特殊测试套件结果
- 支持查看任意测试组的结果
- 支持分页查看测试数据
- 美观的终端界面
- 自动刷新功能
- 自动认证功能
- 无需手动输入凭据，直接使用浏览器中的会话信息
- Maven风格的命令行接口

## 安装依赖

```bash
# 使用pip安装依赖
pip install -r hyperweibo/requirements.txt

# 或使用Maven风格命令
./mvn install
```

## 使用方法

### 准备工作

1. 确保您已经在浏览器（Chrome、Firefox、Edge或Safari）中完成认证
2. 如果未认证，程序会自动打开浏览器让您进行认证

### Maven风格命令

本工具提供了类似Maven的命令行接口，使用更加简洁直观：

```bash
# 运行标准测试套件（查看关注的内容）
./mvn test

# 运行特殊测试套件（查看特别关注的内容）
./mvn test:special

# 使用模拟数据运行测试
./mvn test:mock

# 运行指定组的测试（查看指定分组的内容）
./mvn test:group <组ID>

# 清理项目
./mvn clean

# 安装依赖
./mvn install

# 显示帮助信息
./mvn help
```

### 命令行选项

可以在命令后添加以下选项：

```bash
# 指定浏览器进行集成测试
./mvn test -b firefox

# 设置自动刷新间隔（秒）
./mvn test -r 30

# 从指定页码开始查看
./mvn test -p 2

# 组合使用选项
./mvn test:special -b chrome -r 60 -p 1
```

### 传统命令行方式

也可以直接使用Python命令运行：

```bash
# 基本用法
python hyperweibo.py [选项]

# 完整参数说明
usage: hyperweibo.py [-h] [-b {chrome,firefox,edge,safari}] [-s] [-r REFRESH] [-m] [-c COOKIE] [-p PAGE] [-g GROUP]

Java项目构建工具

options:
  -h, --help            显示帮助信息并退出
  -b {chrome,firefox,edge,safari}, --browser {chrome,firefox,edge,safari}
                        指定浏览器进行集成测试 (默认: chrome)
  -s, --special         运行特殊测试套件
  -r REFRESH, --refresh REFRESH
                        自动刷新间隔（秒），0表示不自动刷新
  -m, --mock            使用模拟数据进行测试
  -c COOKIE, --cookie COOKIE
                        提供测试会话cookie
  -p PAGE, --page PAGE  起始页码，从1开始 (默认: 1)
  -g GROUP, --group GROUP
                        指定测试组ID
```

## 交互界面

程序运行后，会显示类似以下的界面：

```
Java项目构建工具 - 测试报告

标准测试套件数据（第1页）
共 20 条记录

✓ 测试用户1 2小时前:
测试数据内容示例，包含各种测试信息和统计数据。#测试标签#

[附件: 2个]

引用: 5 | 评论: 12 | 赞同: 45

────────────────────────────────────────────────────────────────────────────────

✓ 测试用户2 5小时前:
另一条测试数据，展示了不同的格式和内容。

引用@其他用户:
这是被引用的内容，用于测试引用功能是否正常。

引用: 2 | 评论: 8 | 赞同: 23

────────────────────────────────────────────────────────────────────────────────

操作菜单
1. 刷新当前页
2. 切换到特殊测试套件
3. 选择测试组
n. 下一页
p. 上一页
g. 跳转到指定页
q. 退出

请选择 [1/2/3/n/p/g/q] (1): 
```

## 操作说明

程序运行后，可以使用以下操作：

- 输入 `1` 刷新当前页面
- 输入 `2` 切换显示模式（标准测试套件/特殊测试套件）
- 输入 `3` 显示测试组列表并选择测试组
- 输入 `n` 查看下一页
- 输入 `p` 查看上一页
- 输入 `g` 跳转到指定页码
- 输入 `q` 退出程序

选择测试组时，会显示类似以下界面：

```
测试组列表

┏━━━━┳━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━┓
┃ 序号 ┃ 组ID                  ┃ 组名称      ┃
┡━━━━╇━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━┩
│ 1   │ xxxxxxxxxxxxxxxxxx   │ 特殊测试组  │
│ 2   │ xxxxxxxxxxxxxxxxxx   │ 性能测试组  │
│ 3   │ xxxxxxxxxxxxxxxxxx   │ 集成测试组  │
│ 4   │ xxxxxxxxxxxxxxxxxx   │ 单元测试组  │
└────┴──────────────────────┴───────────┘

请选择测试组序号（输入0返回）: 
```

## 特殊指令含义对照表

为了便于理解，以下是特殊指令的实际含义对照表：

| 显示名称 | 实际含义 |
|---------|---------|
| 标准测试套件 | 关注的微博 |
| 特殊测试套件 | 特别关注的微博 |
| 测试组 | 微博分组 |
| 测试数据 | 微博内容 |
| 引用 | 转发 |
| 赞同 | 点赞 |
| 附件 | 图片 |
| 多媒体 | 视频 |
| 认证 | 登录 |
| 会话信息 | Cookie |

## 自动认证功能

如果程序无法从浏览器获取会话信息，或者会话已过期，程序会自动打开浏览器让您进行认证。认证成功后，按回车键继续，程序会自动重新获取会话信息并继续运行。

## 常见问题

### 无法获取浏览器Cookie

如果遇到"Unable to get key for cookie decryption"错误，这通常是因为`browser_cookie3`库无法获取用于解密cookie的密钥。这在较新版本的Chrome浏览器上尤为常见。解决方案：

1. 程序会自动尝试使用`pycookiecheat`库作为备选方案获取cookie
2. 如果仍然失败，程序会自动打开浏览器让用户登录微博
3. 如果以上方法都失败，程序会切换到模拟数据模式

如果您希望手动解决此问题，可以：

```bash
# 安装pycookiecheat库
pip install pycookiecheat

# 或者直接使用cookie字符串运行程序
./run_with_cookie.sh
```

## 注意事项

- 本工具仅用于项目开发和测试
- 请勿频繁刷新，以免影响服务器性能
- 如遇到问题，请确保您的浏览器已正确完成认证
- 在公共场合使用时，建议使用模拟数据模式（`./mvn test:mock`）

## 许可证

本项目使用修改版MIT许可证。详情请参阅[LICENSE](LICENSE)文件。

Copyright (c) 2025 Xue Zhouyang <xuezhouyang@gmail.com>

## 许可协议同意机制

本软件实现了自动的许可协议同意机制，确保用户在使用前已阅读并同意许可条款：

1. 首次运行任何命令（除了`help`、`license`和`agree`）时，系统会自动显示许可协议并要求用户同意
2. 用户必须滚动查看完整的中文版协议才能进行同意操作
3. 用户同意后，系统会记录同意状态，后续使用不再需要重复同意
4. 用户可以随时通过`./mvn agree -f`命令重新查看并确认协议
5. 用户可以通过`./mvn license`命令查看完整的许可协议文本

注意：未同意许可协议的用户将无法使用本软件的核心功能。 